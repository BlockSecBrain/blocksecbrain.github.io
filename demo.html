<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Domain & IP Toolkit</title>
<style>
body {
    margin: 0;
    font-family: 'Fira Code', monospace;
    background: #1a1a1a;
    color: #00ff00;
}

h1 {
    text-align: center;
    margin: 40px 0 20px 0;
    color: #00ff00;
    font-size: 2.5em;
}

.toolkit-container {
    max-width: 900px;
    margin: auto;
    background: #2a2a2a;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 255, 0, 0.2);
}

.tabs {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
    border-bottom: 2px solid rgba(0, 255, 0, 0.3);
}

.tab {
    padding: 12px 20px;
    border: 1px solid transparent;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    transition: background 0.3s, color 0.3s, border-color 0.3s;
    font-weight: bold;
}

.tab:hover { background: rgba(0, 255, 0, 0.1); border-color: #00ff00; }
.tab.active { background: #00ff00; color: #1a1a1a; border: 1px solid #00ff00; border-bottom: 1px solid #00ff00; }

.content { display: none; padding: 20px; }
.content.active { display: block; }

input, button {
    width: 100%;
    box-sizing: border-box;
    padding: 10px;
    margin: 10px 0;
    background: #1a1a1a;
    border: 1px solid #00ff00;
    color: #00ff00;
    border-radius: 5px;
    font-family: 'Fira Code', monospace;
    font-size: 1em;
}
button:hover { background: #00ff00; color: #1a1a1a; cursor: pointer; }

/* Box-style output */
.result-box {
    background: #111;
    border: 1px solid #00ff00;
    border-radius: 6px;
    padding: 8px 12px;
    margin: 6px 0;
    font-size: 0.95em;
    display: flex;
    justify-content: space-between;
}
.result-key { font-weight: bold; color: #00ff00; flex: 1; }
.result-value { color: #fff; flex: 2; text-align: right; }
.result-missing { color: #ff4444; font-style: italic; }
</style>
</head>
<body>
<div class="toolkit-container">
    <h1>Domain & IP Security Toolkit</h1>

    <div class="tabs">
        <div class="tab active" onclick="openTab('ip')">IP Location</div>
        <div class="tab" onclick="openTab('dns')">DNS Records</div>
        <div class="tab" onclick="openTab('email')">Email Security</div>
        <div class="tab" onclick="openTab('reverse')">Reverse DNS</div>
        <div class="tab" onclick="openTab('whois')">WHOIS Lookup</div>
        <div class="tab" onclick="openTab('headers')">Security Headers</div>
    </div>

    <div id="ip" class="content active">
        <input type="text" id="ipInput" placeholder="Enter IP or leave blank">
        <button onclick="getIPInfo()">Check IP</button>
        <div id="ipResult"></div>
    </div>

    <div id="dns" class="content">
        <input type="text" id="dnsDomain" placeholder="Enter domain">
        <button onclick="getDNSRecords()">Check DNS</button>
        <div id="dnsResult"></div>
    </div>

    <div id="email" class="content">
        <input type="text" id="emailDomain" placeholder="Enter domain">
        <button onclick="getEmailSecurity()">Check Email Security</button>
        <div id="emailResult"></div>
    </div>

    <div id="reverse" class="content">
        <input type="text" id="reverseIP" placeholder="Enter IP">
        <button onclick="getReverseDNS()">Check Reverse DNS</button>
        <div id="reverseResult"></div>
    </div>

    <div id="whois" class="content">
        <input type="text" id="whoisDomain" placeholder="Enter domain">
        <button onclick="getWHOIS()">Check WHOIS</button>
        <div id="whoisResult"></div>
    </div>

    <div id="headers" class="content">
        <input type="text" id="headersDomain" placeholder="Enter domain">
        <button onclick="getSecurityHeaders()">Check Security Headers</button>
        <div id="headersResult"></div>
    </div>
</div>

<script>
function openTab(id) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.querySelector(`.tab[onclick="openTab('${id}')"]`).classList.add('active');
    document.getElementById(id).classList.add('active');
}

let userIP = "";
fetch("https://api.ipify.org?format=json").then(r => r.json()).then(d => userIP = d.ip);

/* IP Info */
async function getIPInfo() {
    const ip = document.getElementById("ipInput").value || userIP;
    const res = document.getElementById("ipResult");
    res.innerHTML = "Checking...";
    try {
        const r = await fetch(`https://ipapi.co/${ip}/json/`);
        const d = await r.json();
        let output = "";
        const fields = { IP: d.ip, City: d.city, Region: d.region, Country: d.country_name, ISP: d.org, Latitude: d.latitude, Longitude: d.longitude };
        for (const [k,v] of Object.entries(fields)) {
            output += `<div class='result-box'><span class='result-key'>${k}</span><span class='result-value'>${v || "-"}</span></div>`;
        }
        res.innerHTML = output;
    } catch (err) { res.innerHTML = "Error: " + err.message; }
}

/* DNS Records */
async function getDNSRecords() {
    const domain = document.getElementById("dnsDomain").value.trim();
    const res = document.getElementById("dnsResult");
    if (!domain) {
        res.innerHTML = `<div class="result-box"><span class="result-key">Error</span><span class="result-value"><span class="result-missing">Please enter a valid domain ❌</span></span></div>`;
        return;
    }
    res.innerHTML = "Checking...";
    const typeMap = {1:"A",2:"NS",5:"CNAME",6:"SOA",12:"PTR",15:"MX",16:"TXT",28:"AAAA"};
    try {
        const r = await fetch(`https://dns.google/resolve?name=${domain}&type=ANY`);
        const d = await r.json();
        if (!d.Answer) { res.innerHTML = `<div class="result-box"><span class="result-key">Info</span><span class="result-value"><span class="result-missing">No DNS records found ❌</span></span></div>`; return; }
        let output = "";
        d.Answer.forEach(a => {
            const typeName = typeMap[a.type] || a.type;
            output += `<div class='result-box'><span class='result-key'>${typeName}</span><span class='result-value'>${a.data}</span></div>`;
        });
        res.innerHTML = output;
    } catch (err) { res.innerHTML = "Error: " + err.message; }
}

/* Email Security */
async function getEmailSecurity() {
    const domain = document.getElementById("emailDomain").value.trim();
    const res = document.getElementById("emailResult");
    if (!domain) {
        res.innerHTML = `<div class="result-box"><span class="result-key">Error</span><span class="result-value"><span class="result-missing">Please enter a valid domain ❌</span></span></div>`;
        return;
    }
    res.innerHTML = "Checking...";
    try {
        const r = await fetch(`https://dns.google/resolve?name=${domain}&type=TXT`);
        const d = await r.json();
        const spf = d.Answer?.find(a => a.data.includes("v=spf1"));
        const dmarc = d.Answer?.find(a => a.data.includes("v=DMARC1"));
        const dkim = d.Answer?.find(a => a.data.includes("dkim"));
        let output = "";
        output += `<div class='result-box'><span class='result-key'>SPF</span><span class='result-value'>${spf ? spf.data : '<span class="result-missing">Not set ❌</span>'}</span></div>`;
        output += `<div class='result-box'><span class='result-key'>DKIM</span><span class='result-value'>${dkim ? dkim.data : '<span class="result-missing">Not set ❌</span>'}</span></div>`;
        output += `<div class='result-box'><span class='result-key'>DMARC</span><span class='result-value'>${dmarc ? dmarc.data : '<span class="result-missing">Not set ❌</span>'}</span></div>`;
        res.innerHTML = output;
    } catch (err) { res.innerHTML = "Error: " + err.message; }
}

/* Reverse DNS */
async function getReverseDNS() {
    const ip = document.getElementById("reverseIP").value.trim();
    const res = document.getElementById("reverseResult");
    if (!ip) {
        res.innerHTML = `<div class="result-box"><span class="result-key">Error</span><span class="result-value"><span class="result-missing">Please enter a valid IP ❌</span></span></div>`;
        return;
    }
    res.innerHTML = "Checking...";
    try {
        const r = await fetch(`https://dns.google/resolve?name=${ip}.in-addr.arpa&type=PTR`);
        const d = await r.json();
        if (!d.Answer) { res.innerHTML = `<div class="result-box"><span class="result-key">Info</span><span class="result-value"><span class="result-missing">No PTR record found ❌</span></span></div>`; return; }
        res.innerHTML = `<div class='result-box'><span class='result-key'>PTR</span><span class='result-value'>${d.Answer[0].data}</span></div>`;
    } catch (err) { res.innerHTML = "Error: " + err.message; }
}

/* WHOIS Lookup via RDAP */
async function getWHOIS() {
    const domain = document.getElementById("whoisDomain").value.trim();
    const res = document.getElementById("whoisResult");
    if (!domain) {
        res.innerHTML = `<div class="result-box"><span class="result-key">Error</span><span class="result-value"><span class="result-missing">Please enter a valid domain ❌</span></span></div>`;
        return;
    }
    res.innerHTML = "Checking...";
    try {
        const r = await fetch(`https://rdap.org/domain/${domain}`);
        const d = await r.json();
        let output = "";
        output += `<div class='result-box'><span class='result-key'>Domain</span><span class='result-value'>${d.ldhName || "-"}</span></div>`;
        output += `<div class='result-box'><span class='result-key'>Registrar</span><span class='result-value'>${d.entities?.[0]?.vcardArray?.[1]?.[1]?.[3] || "-"}</span></div>`;
        output += `<div class='result-box'><span class='result-key'>Created</span><span class='result-value'>${d.events?.find(e=>e.eventAction==="registration")?.eventDate || "-"}</span></div>`;
        output += `<div class='result-box'><span class='result-key'>Expiry</span><span class='result-value'>${d.events?.find(e=>e.eventAction==="expiration")?.eventDate || "-"}</span></div>`;
        res.innerHTML = output;
    } catch (err) { res.innerHTML = "Error: " + err.message; }
}

/* Security Headers */
async function getSecurityHeaders() {
    const domain = document.getElementById("headersDomain").value.trim();
    const res = document.getElementById("headersResult");
    if (!domain) {
        res.innerHTML = `<div class="result-box"><span class="result-key">Error</span><span class="result-value"><span class="result-missing">Please enter a valid domain ❌</span></span></div>`;
        return;
    }
    res.innerHTML = "Checking...";
    try {
        const r = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent("https://" + domain)}`);
        const data = await r.json();
        const headers = data.status?.headers || {};
        const keys = {
            "strict-transport-security": "Strict-Transport-Security",
            "content-security-policy": "Content-Security-Policy",
            "x-frame-options": "X-Frame-Options",
            "x-content-type-options": "X-Content-Type-Options",
            "referrer-policy": "Referrer-Policy",
            "permissions-policy": "Permissions-Policy"
        };
        let output = "";
        for (const [key, label] of Object.entries(keys)) {
            const value = headers[key];
            output += `<div class='result-box'><span class='result-key'>${label}</span><span class='result-value'>${value ? value : '<span class="result-missing">Not set ❌</span>'}</span></div>`;
        }
        res.innerHTML = output;
    } catch (err) { res.innerHTML = "Error: " + err.message; }
}
</script>
</body>
</html>
